@model IEnumerable<eLearningLMS.Models.Support>
@using eLearningLMS.Extensions
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_DashboardeLearning.cshtml";
    
}

@if (Request.IsAuthenticated && User.IsInRole("Student"))
{
    <!-- begin #sidebar -->
    <div id="sidebar" class="sidebar">
        <!-- begin sidebar scrollbar -->
        <div data-scrollbar="true" data-height="100%">
            <!-- begin sidebar user -->
            <ul class="nav">
                <li class="nav-profile">
                    <div class="image">
                        <a href="javascript:;">
                            <img src="@Url.Action("UserPhotos", "Home")" alt="User Image"
                                 style=" width: 40px; height: 40px;
                                " />
                        </a>

                    </div>
                    <div class="info">
                        @User.Identity.GetUserFirstName()
                        <span aria-label="Active now" style="background: rgb(66, 183, 42); border-radius: 50%; display: inline-block; height: 6px; width: 6px;"></span> <small>Student</small>
                    </div>
                </li>
            </ul>
            <!-- end sidebar user -->
            <!-- begin sidebar nav -->
            <ul class="nav">
                <li class="nav-header">Navigation</li>
                <li class="has-sub active">
                    <a href="javascript:;">
                        @*<b class="caret pull-right"></b>*@
                        <i class="fa fa-laptop"></i>
                        <span>Dashboard</span>
                    </a>
                    @*<ul class="sub-menu">
                            <li class="active"><a href="index.html">Dashboard v1</a></li>
                            <li><a href="index_v2.html">Dashboard v2</a></li>
                        </ul>*@
                </li>
                <li class="has-sub">
                    <a href="~/Enrollments/Index">
                        <span class="badge pull-right">10</span>
                        <i class="fa fa-inbox"></i>
                        <span>Enrollments</span>
                    </a>
                </li>
                <li class="has-sub">
                    <a href="~/Support">
                        @*<b class="caret pull-right"></b>*@
                        <i class="fa fa-book"></i>
                        <span>Download Courses<span class="label label-theme m-l-5">NEW</span></span>
                    </a>
                </li>
                <li class="has-sub">
                    <a href="~/Home/QuizIndex">
                        @*<b class="caret pull-right"></b>*@
                        <i class="fa fa-pencil-square-o"></i>
                        <span>Attempt Quiz</span>
                    </a>
                </li>
                <li><a href="~/Home/Calendar"><i class="fa fa-calendar"></i> <span>Calendar</span></a></li>
                <li class="has-sub">
                    <a href="javascript:;">
                        <b class="caret pull-right"></b>
                        <i class="fa fa-key"></i>
                        <span>Login & Register</span>
                    </a>
                </li>
                <li class="has-sub">
                    <a href="javascript:;">
                        <b class="caret pull-right"></b>
                        <i class="fa fa-cubes"></i>
                        <span>Version <span class="label label-theme m-l-5">NEW</span></span>
                    </a>
                    <ul class="sub-menu">
                        <li><a href="javascript:;">HTML</a></li>
                        <li><a href="../template_content_ajax/index.html">AJAX</a></li>
                        <li><a href="../template_content_angularjs/index.html">ANGULAR JS</a></li>
                        <li><a href="../template_content_angularjs2/index.html">ANGULAR JS 2 <i class="fa fa-paper-plane text-theme m-l-5"></i></a></li>
                        <li><a href="../template_content_material/index.html">MATERIAL DESIGN</a></li>
                    </ul>
                </li>

                <!-- begin sidebar minify button -->
                <li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
                <!-- end sidebar minify button -->
            </ul>
            <!-- end sidebar nav -->
        </div>
        <!-- end sidebar scrollbar -->
    </div>

    <div id="content" class="content">
        <!-- begin breadcrumb -->
        <ol class="breadcrumb pull-right">
            <li><a href="javascript:;">Home</a></li>
            <li class="active">Course Materials</li>

        </ol>

        <div class="row">
            <div class="col-md-10">
                <!-- begin panel -->
                <div class="panel panel-inverse" data-sortable-id="ui-general-3">
                    <div class="panel-heading">
                        <div class="panel-heading-btn">
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" data-click="panel-remove"><i class="fa fa-times"></i></a>
                        </div>
                        <h4 class="panel-title">Course Materials</h4>
                    </div>
                    <div class="panel-body">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Name) of Instructor
                                    </th>
                                    <th>
                                        Course Title
                                    </th>
                                    <th>Date Posted</th>
                                    <th>Total Files</th>
                                    <th>Download Courses</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model == null)
                                {

                                }
                                else
                                {
                                    foreach (var item in Model)
                                    {
                                        <tr>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Name)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Summary)
                                            </td>
                                            <td>
                                                @foreach (var items in ViewBag.DownloadCourse)
                                                {

                                                    if (item.SupportId.Equals(items.SupportId) && item.CoursesId == items.CourseCode)
                                                    {
                                                        <span>@items.dateUploaded</span>
                                                    }
                                                }
                                            </td>
                                            <td>
                                                @if (item.FileDetai.Count() == 0)
                                                {
                                                    <span>No File</span>
                                                }
                                                else
                                                {
                                                    <span class="badge badge-primary">@item.FileDetai.Count() File(s)</span>
                                                }
                                                @*@foreach (var m in item.FileDetail.CourseCode.Equals(ViewBag.Course))
                                                    {

                                                            <a class="title" href="/Support/Download/?p=@(m.Id + m.Extension)&d=@m.FileName">@m.FileName</a>
                                                            <a href="javascript:void(0);" data-id="@m.Id" class="deleteItem">X</a>

                                                    }*@
                                            </td>
                                            <td>
                                                @foreach (var items in ViewBag.DownloadCourse)
                                                {

                                                    if (item.SupportId.Equals(items.SupportId) && item.CoursesId == items.CourseCode)
                                                    {
                                                        <a class="title" href="/Support/Download/?p=@(items.Id + items.Extension)&d=@items.FileName">@items.FileName</a>
                                                        <a href="javascript:void(0);" data-id="@items.Id" class="deleteItem"></a>
                                                    }
                                                }
                                                @*@Html.ActionLink("Edit", "Edit", new { id = item.SupportId }) |
                                                    <a href="javascript:void(0);" data-id="@item.SupportId" class="deleteItem">Delete</a>*@
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>

                    </div>
                    <!-- end #content -->
                </div>
            </div>
        </div>
    </div>

}
